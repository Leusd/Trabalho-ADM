<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gest√£o de Despesas em Viagens</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f5f5f5;
        }
        .container {
            width: 100%;
            max-width: 600px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h2 {
            text-align: center;
        }
        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }
        .input-group input,
        .input-group select {
            padding: 8px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        /* Ajusta a largura dos campos */
        #descricao {
            flex: 2;
            min-width: 200px;
        }
        #quantidade {
            flex: 2;
            min-width: 70px;
        }
        #valor, #moedaOrigem, #moedaDestino {
            flex: 1;
            min-width: 60px;
        }
        .input-group button {
            padding: 8px 16px;
            font-size: 14px;
            border: none;
            border-radius: 5px;
            background-color: #4285f4;
            color: white;
            cursor: pointer;
            flex-basis: 100%;
        }
        .input-group button:hover {
            background-color: #3367d6;
        }
        .expense-list {
            margin-top: 20px;
        }
        .expense-item {
            background-color: #e0e0e0;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .totals {
            margin-top: 20px;
            font-weight: bold;
            text-align: center;
        }
        .edit-btn, .delete-btn {
            background-color: transparent;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        .edit-btn {
            color: #1a73e8;
        }
        .delete-btn {
            color: #d32f2f;
        }

        /* Estilos responsivos */
        @media (max-width: 600px) {
            .input-group {
                flex-direction: column;
            }
            #descricao, #quantidade, #valor, #moedaOrigem, #moedaDestino {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Gest√£o de Despesas em Viagens</h2>
    <div class="input-group">
        <input type="text" id="descricao" placeholder="Descri√ß√£o do Item">
        <input type="number" id="quantidade" placeholder="Quantidade">
        <input type="number" id="valor" placeholder="Valor">
        <select id="moedaOrigem">
            <option value="USD">USD</option>
            <option value="BRL">BRL</option>
        </select>
        <select id="moedaDestino">
            <option value="BRL">BRL</option>
            <option value="USD">USD</option>
        </select>
        <button onclick="adicionarDespesa()">Adicionar</button>
    </div>
    <div class="expense-list" id="listaDespesas"></div>
    <div class="totals">
        <p>Total (Moeda de Origem): <span id="totalOrigem">0.00</span></p>
        <p>Total (Moeda de Destino): <span id="totalDestino">0.00</span></p>
    </div>
</div>

<script>
    let despesas = [];

    function adicionarDespesa() {
        const descricao = document.getElementById('descricao').value;
        const quantidade = parseFloat(document.getElementById('quantidade').value);
        const valor = parseFloat(document.getElementById('valor').value);
        const moedaOrigem = document.getElementById('moedaOrigem').value;
        const moedaDestino = document.getElementById('moedaDestino').value;

        fetch('https://v6.exchangerate-api.com/v6/0c97323f348aa3d7704c9606/latest/' + moedaOrigem)
            .then((response) => response.json())
            .then((json) => {
                const taxaCambio = json['conversion_rates'][moedaDestino]; // Taxa fict√≠cia para convers√£o USD-BRL
                const valorConvertido = valor * taxaCambio;

                const despesa = {
                    descricao,
                    quantidade,
                    valor,
                    moedaOrigem,
                    valorConvertido,
                    moedaDestino
                };

                despesas.push(despesa);
            })
        atualizarLista();
        atualizarTotais();

    }

    function atualizarLista() {
        const listaDespesas = document.getElementById('listaDespesas');
        listaDespesas.innerHTML = '';

        despesas.forEach((despesa, index) => {
            const item = document.createElement('div');
            item.className = 'expense-item';
            item.innerHTML = `
                ${despesa.descricao} (Qtd. ${despesa.quantidade}): ${despesa.valor} ${despesa.moedaOrigem} => ${despesa.valorConvertido.toFixed(2)} ${despesa.moedaDestino}
                <button class="edit-btn" onclick="editarDespesa(${index})">‚úèÔ∏è</button>
                <button class="delete-btn" onclick="excluirDespesa(${index})">üóëÔ∏è</button>
            `;
            listaDespesas.appendChild(item);
        });
    }

    function atualizarTotais() {
        let totalOrigem = 0;
        let totalDestino = 0;

        despesas.forEach(despesa => {
            totalOrigem += despesa.valor;
            totalDestino += despesa.valorConvertido;
        });

        document.getElementById('totalOrigem').textContent = totalOrigem.toFixed(2);
        document.getElementById('totalDestino').textContent = totalDestino.toFixed(2);
    }

    function excluirDespesa(index) {
        despesas.splice(index, 1);
        atualizarLista();
        atualizarTotais();
    }

    function editarDespesa(index) {
        const despesa = despesas[index];
        document.getElementById('descricao').value = despesa.descricao;
        document.getElementById('quantidade').value = despesa.quantidade;
        document.getElementById('valor').value = despesa.valor;
        document.getElementById('moedaOrigem').value = despesa.moedaOrigem;
        document.getElementById('moedaDestino').value = despesa.moedaDestino;

        excluirDespesa(index);
    }
</script>

</body>
</html>